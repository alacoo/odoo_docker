# ุงุจุฏุฃ ูู ุตูุฑุฉ Odoo 18 ุงูุฑุณููุฉ
FROM odoo:18

# ุชุญูู ุฅูู ุงููุณุชุฎุฏู ุงูุฌุฐุฑ (root) ูุชุชููู ูู ุชุซุจูุช ุงูุญุฒู
USER root

# -------------------------------------------------------------------
# โญ๏ธ ุงูุฅุถุงูุฉ: ุชุซุจูุช ุฃุฏูุงุช ุงูุจูุงุก ููุชุทูุจุงุช ุจุงูุซูู ูุจู ุชุดุบูู pip
# -------------------------------------------------------------------
RUN apt-get update && \
    apt-get install -y --no-install-recommends \
    # --- ุฃุฏูุงุช ุงูุจูุงุก ุงูุฃุณุงุณูุฉ ---
    build-essential \
    python3-dev \
    # --- ๐ก ุฅุถุงูุฉ: ููุชุจุงุช ุดุงุฆุนุฉ ูุชุฌููุน ุฅุถุงูุงุช ุจุงูุซูู ---
    libxml2-dev \
    libxslt1-dev \
    libffi-dev \
    libssl-dev \
    libsasl2-dev \
    libldap2-dev \
    && \
    rm -rf /var/lib/apt/lists/*
# -------------------------------------------------------------------

# ๐ก ุชุนุฏูู: ูุตู ุงูุฃูุงูุฑ ูุฒูุงุฏุฉ ุงููุถูุญ ูุชุชุจุน ุงูุฃุฎุทุงุก
# ุงูุฎุทูุฉ 1: ุชุญุฏูุซ ุฃุฏูุงุช ุงูุจูุงุก ุงูุฎุงุตุฉ ุจู pip
# โ๏ธ ุฅุถุงูุฉ --break-system-packages ูุชุฌุงูุฒ ุฎุทุฃ PEP 668
# ๐ก ุฅุถุงูุฉ --ignore-installed ูุชุฌุงูุฒ ุฎุทุฃ "Cannot uninstall wheel"
RUN python3 -m pip install --upgrade --break-system-packages --ignore-installed pip setuptools wheel

# ุงูุฎุทูุฉ 2: ุชุซุจูุช ุงูุญุฒูุฉ ุงููุทููุจุฉ ูุน ุฅุธูุงุฑ ุชูุงุตูู ุฅุถุงููุฉ (-vvv)
# โ๏ธ ุฅุถุงูุฉ --break-system-packages ูุชุฌุงูุฒ ุฎุทุฃ PEP 668
RUN python3 -m pip install --no-cache-dir --break-system-packages -vvv qifparse

# --- ๐ก ุงูุชุฑุงุญ ูุฅุฏุงุฑุฉ ุงูุฅุถุงูุงุช (Addons) ---
# ... (ุจุงูู ุงูููู ููุง ูู) ...
# COPY ./addons /mnt/extra-addons

# ุงุฑุฌุน ุฅูู ูุณุชุฎุฏู odoo ุงูุงูุชุฑุงุถู
USER odoo
